<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#0b0f1a" />
  <title>Math Dash ‚Äì Add & Run</title>
  
  <!-- Vercel Analytics -->
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
  
  <!-- Offline-first, no external assets/frameworks -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- App Wrapper controls orientation layouts via CSS -->
  <div id="app" class="app" aria-live="polite">

    <!-- Start Screen -->
    <section id="startScreen" class="screen screen--active" role="dialog" aria-modal="true" aria-labelledby="title">
      <div class="screen__panel">
        <h1 id="title" class="title">Math Dash ‚Äì Add & Run</h1>
        <p class="subtitle">Tap the correct answer to speed up and collect more stars!</p>
        <div class="start-actions">
          <button id="btnPlay" class="btn btn--primary">Play</button>
          <button id="btnHow" class="btn">How to Play</button>
          <button id="btnMuteStart" class="btn" aria-pressed="false">üîä Sound: On</button>
          <button id="btnFullscreenStart" class="btn" type="button">‚§¢ Tam Ekran</button>
          <a href="../index.html" class="btn">üè† Ana Sayfa</a>
        </div>
        <details class="howto" id="howtoDetails">
          <summary>Quick guide</summary>
          <ul>
            <li>Answer correctly to boost speed and increase your streak.</li>
            <li>3 correct in a row triggers Turbo for 5s: faster and x2 star points.</li>
            <li>Wrong answers cost a heart. Lose 3 hearts and it‚Äôs game over.</li>
            <li>Supports portrait and landscape. No keyboard needed.</li>
          </ul>
        </details>
      </div>
    </section>

    <!-- Game HUD + Layout Container -->
    <main id="game" class="game" aria-label="Game area" hidden>
      <!-- Problem + Hearts (position varies with CSS layout) -->
      <header class="hud" aria-label="Status">
        <div class="problem" id="problemText" aria-live="polite">1 + 1 = ?</div>
        <div class="hud__row">
          <div class="hearts" id="hearts" aria-label="Lives" title="Lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
          <div class="stats">
            <span id="timer" title="Time left">‚è±Ô∏è 2:00</span>
            <span id="score" title="Score">‚≠ê 0</span>
            <span id="speed" title="Speed">üèÉ 0</span>
            <span id="streak" title="Streak">üî• 0</span>
            <span id="turboBadge" class="badge" title="Turbo" aria-label="Turbo" hidden>‚ö°</span>
          </div>
          <div class="controls">
            <button id="btnPause" class="icon-btn" aria-pressed="false" title="Pause">‚è∏Ô∏è</button>
            <button id="btnMute" class="icon-btn" aria-pressed="false" title="Mute/Unmute">üîä</button>
            <button id="btnFullscreen" class="icon-btn" type="button" title="Tam Ekran A√ß/Kapat">‚§¢</button>
            <a href="../index.html" class="icon-btn" title="Ana Sayfa">üè†</a>
          </div>
        </div>
      </header>

      <!-- Scene Area (Canvas) -->
      <section class="scene-wrap" aria-label="Runner scene">
        <canvas id="scene" class="scene" width="480" height="270" role="img" aria-label="Runner collecting stars"></canvas>
      </section>

      <!-- Answers Panel (portrait: bottom grid; landscape: right column) -->
      <nav class="answers" id="answers" aria-label="Answer choices">
        <button class="answer" data-index="0">0</button>
        <button class="answer" data-index="1">0</button>
        <button class="answer" data-index="2">0</button>
        <button class="answer" data-index="3">0</button>
      </nav>
    </main>

    <!-- Pause Overlay -->
    <section id="pauseOverlay" class="overlay" role="dialog" aria-modal="true" aria-label="Paused" hidden>
      <div class="overlay__panel">
        <h2>Paused</h2>
        <p>Take a breather.</p>
        <div class="start-actions">
          <button id="btnResume" class="btn btn--primary">Resume</button>
          <a href="../index.html" class="btn">üè† Ana Sayfa</a>
        </div>
      </div>
    </section>

    <!-- Game Over Screen -->
    <section id="gameOver" class="screen" role="dialog" aria-modal="true" aria-labelledby="goTitle" hidden>
      <div class="screen__panel">
        <h2 id="goTitle">Game Over</h2>
        <p id="finalScore">Score: 0</p>
        <p id="bestScore">Best: 0</p>
        <div class="start-actions">
          <button id="btnReplay" class="btn btn--primary">Play Again</button>
          <a href="../index.html" class="btn">üè† Ana Sayfa</a>
        </div>
      </div>
    </section>

  </div>

  <script src="game.js"></script>
  <script>
    (function(){
      function isFS(){ return !!(document.fullscreenElement || document.webkitFullscreenElement); }
      function enterFS(){
        const el = document.documentElement;
        if(el.requestFullscreen) return el.requestFullscreen();
        if(el.webkitRequestFullscreen) return el.webkitRequestFullscreen();
      }
      function exitFS(){
        if(document.exitFullscreen) return document.exitFullscreen();
        if(document.webkitExitFullscreen) return document.webkitExitFullscreen();
      }
      function toggleFS(){ isFS() ? exitFS() : enterFS(); }
      function bind(id, fn){ const el = document.getElementById(id); if(el) el.addEventListener('click', fn); }
      bind('btnFullscreenStart', toggleFS);
      bind('btnFullscreen', toggleFS);
      // Update icons/titles when FS changes
      function sync(){
        const on = isFS();
        const btn = document.getElementById('btnFullscreen');
        const btnS = document.getElementById('btnFullscreenStart');
        if(btn){ btn.textContent = on ? '‚§¢' : '‚§¢'; btn.title = on ? 'Tam Ekrandan √áƒ±k' : 'Tam Ekran A√ß'; }
        if(btnS){ btnS.textContent = on ? '‚§¢ Tam Ekrandan √áƒ±k' : '‚§¢ Tam Ekran'; }
      }
      document.addEventListener('fullscreenchange', sync);
      document.addEventListener('webkitfullscreenchange', sync);
    })();
  </script>
</body>
</html>
