<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blok D√ºnyasƒ± - Emir'in Oyun D√ºnyasƒ±</title>
    
    <!-- Vercel Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #87CEEB, #98FB98);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .top-bar {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .top-bar h1 {
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            font-size: 2.2em;
            margin: 0;
        }

        .home-btn {
            background: linear-gradient(45deg, #FF8A80, #FFB74D);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .home-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .game-area {
            display: flex;
            padding: 20px;
            gap: 20px;
            min-height: 600px;
        }

        .block-palette {
            width: 200px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-height: 600px;
            overflow-y: auto;
        }

        .palette-title {
            color: white;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .block-type {
            width: 100%;
            height: 50px;
            margin-bottom: 10px;
            border: 3px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .block-type:hover {
            transform: scale(1.05);
            border-color: #FFD700;
        }

        .block-type.selected {
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .block-toprak { background: linear-gradient(135deg, #8B4513, #D2691E); }
        .block-tas { background: linear-gradient(135deg, #696969, #A9A9A9); }
        .block-odun { background: linear-gradient(135deg, #8B4513, #CD853F); }
        .block-demir { background: linear-gradient(135deg, #708090, #C0C0C0); }
        .block-su { background: linear-gradient(135deg, #1E90FF, #00BFFF); }
        .block-cim { background: linear-gradient(135deg, #228B22, #32CD32); }
        .block-elmas { background: linear-gradient(135deg, #87CEEB, #E0E6FF); color: #333; }
        .block-lav { background: linear-gradient(135deg, #FF4500, #DC143C); }
        .block-obsidyen { background: linear-gradient(135deg, #2F2F2F, #000000); }
        .block-yaprak { background: linear-gradient(135deg, #32CD32, #228B22); }
        .block-calisma-masasi { background: linear-gradient(135deg, #8B4513, #A0522D); }
        .block-firin { background: linear-gradient(135deg, #696969, #808080); }
        .block-ocak { background: linear-gradient(135deg, #2F4F4F, #708090); }
        .block-tahta { background: linear-gradient(135deg, #DEB887, #F4A460); }
        .block-cubuk { background: linear-gradient(135deg, #CD853F, #D2B48C); }
        .block-balta { background: linear-gradient(135deg, #8B4513, #A0522D); }

        .build-area {
            flex: 1;
            background: linear-gradient(135deg, #E3F2FD, #F3E5F5);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .build-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(500, 30px); /* 500 blok geni≈ülik, her biri 30px */
            grid-template-rows: repeat(15, 30px); /* 15 blok y√ºkseklik */
            gap: 1px;
            background: #ccc;
            border: 2px solid #888;
            border-radius: 8px;
            position: absolute;
            top: 0;
            left: 0;
        }

        .viewport {
            width: 600px;
            height: 450px;
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            border: 2px solid #888;
            border-radius: 8px;
            background: #f0f0f0;
        }

        .grid-cell {
            background: #f5f5f5;
            cursor: pointer;
            transition: all 0.1s ease;
            border: 1px solid #ddd;
            position: relative;
        }

        .grid-cell:hover {
            border-color: #FFD700;
            transform: scale(1.05);
            z-index: 1;
        }

        /* Grid h√ºcrelerinde blok stilleri */
        .grid-cell.block-toprak { background: linear-gradient(135deg, #8B4513, #D2691E); }
        .grid-cell.block-tas { background: linear-gradient(135deg, #696969, #A9A9A9); }
        .grid-cell.block-odun { background: linear-gradient(135deg, #8B4513, #CD853F); }
        .grid-cell.block-demir { background: linear-gradient(135deg, #708090, #C0C0C0); }
        .grid-cell.block-su { background: linear-gradient(135deg, #1E90FF, #00BFFF); }
        .grid-cell.block-cim { background: linear-gradient(135deg, #228B22, #32CD32); }
        .grid-cell.block-elmas { background: linear-gradient(135deg, #87CEEB, #E0E6FF); }
        .grid-cell.block-lav { background: linear-gradient(135deg, #FF4500, #DC143C); }
        .grid-cell.block-obsidyen { background: linear-gradient(135deg, #2F2F2F, #000000); }
        .grid-cell.block-yaprak { background: linear-gradient(135deg, #32CD32, #228B22); }
        .grid-cell.block-calisma-masasi { 
            background: linear-gradient(135deg, #8B4513, #A0522D); 
            position: relative;
        }
        .grid-cell.block-firin { 
            background: linear-gradient(135deg, #696969, #808080); 
            position: relative;
        }
        .grid-cell.block-ocak { 
            background: linear-gradient(135deg, #2F4F4F, #708090); 
            position: relative;
        }
        .grid-cell.block-tahta { background: linear-gradient(135deg, #DEB887, #F4A460); }
        .grid-cell.block-cubuk { background: linear-gradient(135deg, #CD853F, #D2B48C); }
        .grid-cell.block-balta { background: linear-gradient(135deg, #8B4513, #A0522D); }

        /* √úretim bloku efektleri */
        .grid-cell.block-firin::after {
            content: 'üî•';
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.7em;
            animation: flicker 2s infinite;
        }

        .grid-cell.block-ocak::after {
            content: 'üí®';
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.7em;
            animation: smoke 3s infinite;
        }

        .grid-cell.block-calisma-masasi::after {
            content: '‚öíÔ∏è';
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.7em;
            animation: hammer 1.5s infinite;
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes smoke {
            0% { transform: translateY(0); opacity: 0.8; }
            50% { transform: translateY(-2px); opacity: 1; }
            100% { transform: translateY(-4px); opacity: 0; }
        }

        @keyframes hammer {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        /* Karakter stili */
        .character {
            position: absolute;
            width: 90%;
            height: 90%;
            background: linear-gradient(135deg, #000000, #333333);
            border: 2px solid #FFD700;
            border-radius: 15%;
            top: 5%;
            left: 5%;
            z-index: 10;
            transition: all 0.1s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        }

        .character.jumping {
            transition: all 0.1s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
        }

        /* Kƒ±rƒ±lma progress bar */
        .break-progress {
            position: absolute;
            top: -8px;
            left: 0;
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            z-index: 15;
            overflow: hidden;
        }

        .break-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757, #ffa502, #2ed573);
            width: 0%;
            transition: width 0.1s ease;
            border-radius: 3px;
        }

        .grid-cell.breaking {
            animation: breakShake 0.1s infinite;
        }

        @keyframes breakShake {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-1px, -1px); }
            50% { transform: translate(1px, -1px); }
            75% { transform: translate(-1px, 1px); }
        }

        .controls {
            margin-top: 20px;
            text-align: center;
        }

        .control-btn {
            background: linear-gradient(45deg, #FF4757, #FF6B9D);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .control-btn.clear {
            background: linear-gradient(45deg, #FF6B6B, #EE5A24);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #4ECDC4;
        }

        .instructions p {
            margin: 5px 0;
            color: #333;
            font-weight: bold;
        }

        /* Envanter stilleri */
        .inventory-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .inventory-overlay.active {
            display: flex;
        }

        .inventory-panel {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .inventory-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: white;
        }

        .inventory-header h3 {
            margin: 0;
            font-size: 1.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .inventory-close {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .inventory-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
            min-height: 200px;
        }

        .inventory-slot {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
        }

        .inventory-slot:hover {
            transform: scale(1.05);
            border-color: #FFD700;
        }

        .inventory-slot.selected {
            border-color: #FFD700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .inventory-slot .block-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .inventory-slot .block-count {
            font-size: 0.9em;
            font-weight: bold;
            color: #333;
        }

        .inventory-slot .block-name {
            font-size: 0.8em;
            color: #666;
            margin-top: 2px;
        }

        .inventory-footer {
            text-align: center;
            color: white;
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Crafting stilleri */
        .crafting-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .crafting-section h4 {
            color: white;
            margin: 0 0 15px 0;
            text-align: center;
            font-size: 1.2em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .recipe {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .recipe:hover {
            transform: scale(1.02);
            border-color: #FFD700;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .recipe-input, .recipe-output {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .recipe-arrow {
            margin: 0 15px;
            font-size: 1.2em;
            color: #333;
            font-weight: bold;
        }

        .recipe-icon {
            width: 25px;
            height: 25px;
            border-radius: 4px;
            display: inline-block;
        }

        .recipe-count {
            font-weight: bold;
            color: #333;
            font-size: 0.9em;
        }

        .recipe-name {
            color: #666;
            font-size: 0.8em;
        }

        /* Hotbar stilleri */
        .hotbar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #444;
            z-index: 100;
        }

        .hotbar-slot {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #666;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .hotbar-slot:hover {
            border-color: #FFD700;
            background: rgba(255, 255, 255, 0.2);
        }

        .hotbar-slot.selected {
            border-color: #FFD700;
            background: rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .hotbar-icon {
            width: 35px;
            height: 35px;
            border-radius: 4px;
            margin-bottom: 2px;
        }

        .hotbar-count {
            font-size: 0.7em;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        /* Envanter a√ßƒ±kken hotbar g√∂ster */
        .inventory-overlay.active ~ .hotbar {
            bottom: 80px; /* Biraz yukarƒ± ta≈üƒ± */
            background: rgba(0, 0, 0, 0.9);
            border-color: #FFD700;
        }

        /* Drag & Drop stilleri */
        .hotbar-slot[draggable="true"] {
            cursor: grab;
        }

        .hotbar-slot.dragging {
            opacity: 0.5;
            transform: scale(0.9);
            cursor: grabbing;
        }

        .inventory-slot.drag-over {
            border-color: #00FF00 !important;
            background: rgba(0, 255, 0, 0.2) !important;
            transform: scale(1.1) !important;
        }

        .hotbar-slot.drag-over {
            border-color: #00FF00 !important;
            background: rgba(0, 255, 0, 0.2) !important;
        }

        .drag-ghost {
            width: 50px;
            height: 50px;
            opacity: 0.8;
            border-radius: 8px;
            transform: rotate(5deg);
        }

        @media (max-width: 768px) {
            body {
                font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            }
            
            .game-area {
                flex-direction: column;
                padding: 10px;
            }

            .block-palette {
                width: 100%;
                order: 2;
            }

            .palette-title {
                font-size: 1.1em;
            }

            .block-type {
                height: 40px;
                font-size: 0.9em;
            }

            .grid-container {
                grid-template-columns: repeat(15, 1fr);
                grid-template-rows: repeat(12, 1fr);
                height: 300px;
                max-width: 100%;
            }

            .top-bar h1 {
                font-size: 1.5em;
            }

            .control-btn {
                padding: 10px 18px;
                font-size: 1em;
                margin: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <h1>üß± Blok D√ºnyasƒ±</h1>
            <a href="index.html" class="home-btn">üè† Ana Sayfa</a>
        </div>

        <div class="game-area">
            <div class="block-palette">
                <div class="palette-title">üé® Blok Paleti</div>
                <div class="block-type block-toprak selected" data-type="toprak">üü´ Toprak</div>
                <div class="block-type block-tas" data-type="tas">üü™ Ta≈ü</div>
                <div class="block-type block-odun" data-type="odun">üü§ Odun</div>
                <div class="block-type block-demir" data-type="demir">‚ö´ Demir</div>
                <div class="block-type block-su" data-type="su">üü¶ Su</div>
                <div class="block-type block-cim" data-type="cim">üü© √áim</div>
                <div class="block-type block-elmas" data-type="elmas">üíé Elmas</div>
                <div class="block-type block-lav" data-type="lav">üî• Lav</div>
                <div class="block-type block-obsidyen" data-type="obsidyen">‚¨õ Obsidyen</div>
                <div class="block-type block-yaprak" data-type="yaprak">üçÉ Yaprak</div>
                <div class="block-type block-calisma-masasi" data-type="calisma-masasi">üî® √áalƒ±≈üma Masasƒ±</div>
                <div class="block-type block-firin" data-type="firin">üî• Fƒ±rƒ±n</div>
                <div class="block-type block-ocak" data-type="ocak">üß± Ocak</div>
                <div class="block-type block-tahta" data-type="tahta">üìã Tahta</div>
                <div class="block-type block-cubuk" data-type="cubuk">ü•¢ √áubuk</div>
                <div class="block-type block-balta" data-type="balta">ü™ì Balta</div>
            </div>

            <div class="build-area">
                <div class="instructions">
                    <p>üñ±Ô∏è <strong>Sol Tƒ±k:</strong> Blok Koy | <strong>Saƒü Tƒ±k:</strong> Blok Kƒ±r</p>
                    <p>üéÆ <strong>WASD:</strong> Hareket | <strong>Space:</strong> Zƒ±pla | <strong>E:</strong> Envanter | <strong>1,2,3:</strong> Hotbar</p>
                    <p>üé® Alttaki hƒ±zlƒ± envanteri veya sol paleti kullanƒ±n!</p>
                </div>
                
                <div class="build-title">üèóÔ∏è ƒ∞n≈üa Alanƒ±</div>
                <div class="viewport" id="viewport">
                    <div class="grid-container" id="buildGrid"></div>
                </div>
                
                <div class="controls">
                    <button class="control-btn clear" onclick="clearGrid()">üßπ Temizle</button>
                </div>
            </div>
        </div>
        
        <!-- Hotbar (Hƒ±zlƒ± Envanter) -->
        <div class="hotbar" id="hotbar">
            <div class="hotbar-slot" data-slot="0">
                <div class="hotbar-icon"></div>
                <div class="hotbar-count"></div>
            </div>
            <div class="hotbar-slot" data-slot="1">
                <div class="hotbar-icon"></div>
                <div class="hotbar-count"></div>
            </div>
            <div class="hotbar-slot" data-slot="2">
                <div class="hotbar-icon"></div>
                <div class="hotbar-count"></div>
            </div>
        </div>
        
        <!-- Envanter -->
        <div class="inventory-overlay" id="inventoryOverlay">
            <div class="inventory-panel">
                <div class="inventory-header">
                    <h3>üéí Envanter</h3>
                    <button class="inventory-close" onclick="toggleInventory()">‚ùå</button>
                </div>
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- Envanter slotlarƒ± buraya eklenecek -->
                </div>
                
                <!-- Crafting B√∂l√ºm√º -->
                <div class="crafting-section" id="craftingSection" style="display: none;">
                    <h4>üî® √áalƒ±≈üma Masasƒ±</h4>
                    <div class="crafting-recipes">
                        <div class="recipe" onclick="craftPlanks()">
                            <div class="recipe-input">
                                <span class="recipe-icon block-icon block-odun"></span>
                                <span class="recipe-count">1</span>
                                <span class="recipe-name">Odun</span>
                            </div>
                            <div class="recipe-arrow">‚Üí</div>
                            <div class="recipe-output">
                                <span class="recipe-icon block-icon block-tahta"></span>
                                <span class="recipe-count">4</span>
                                <span class="recipe-name">Tahta</span>
                            </div>
                        </div>
                        <div class="recipe" onclick="craftSticksFromWood()">
                            <div class="recipe-input">
                                <span class="recipe-icon block-icon block-odun"></span>
                                <span class="recipe-count">2</span>
                                <span class="recipe-name">Odun</span>
                            </div>
                            <div class="recipe-arrow">‚Üí</div>
                            <div class="recipe-output">
                                <span class="recipe-icon block-icon block-cubuk"></span>
                                <span class="recipe-count">4</span>
                                <span class="recipe-name">√áubuk</span>
                            </div>
                        </div>
                        <div class="recipe" onclick="craftSticksFromPlanks()">
                            <div class="recipe-input">
                                <span class="recipe-icon block-icon block-tahta"></span>
                                <span class="recipe-count">2</span>
                                <span class="recipe-name">Tahta</span>
                            </div>
                            <div class="recipe-arrow">‚Üí</div>
                            <div class="recipe-output">
                                <span class="recipe-icon block-icon block-cubuk"></span>
                                <span class="recipe-count">4</span>
                                <span class="recipe-name">√áubuk</span>
                            </div>
                        </div>
                        <div class="recipe" onclick="craftAxe()">
                            <div class="recipe-input">
                                <span class="recipe-icon block-icon block-cubuk"></span>
                                <span class="recipe-count">2</span>
                                <span class="recipe-name">√áubuk</span>
                                <span style="margin: 0 5px;">+</span>
                                <span class="recipe-icon block-icon block-tahta"></span>
                                <span class="recipe-count">3</span>
                                <span class="recipe-name">Tahta</span>
                            </div>
                            <div class="recipe-arrow">‚Üí</div>
                            <div class="recipe-output">
                                <span class="recipe-icon block-icon block-balta"></span>
                                <span class="recipe-count">1</span>
                                <span class="recipe-name">Balta</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="inventory-footer">
                    <p>Kƒ±rdƒ±ƒüƒ±nƒ±z bloklar burada toplanƒ±r. √úretim i√ßin √ßalƒ±≈üma masasƒ±na sol tƒ±k yapƒ±n!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Oyun durumu
        let selectedBlockType = 'toprak';
        const gridSize = { cols: 500, rows: 15 }; // 500x15 b√ºy√ºk harita
        let grid = [];
        let character = { row: 13, col: 250 }; // Karakterin pozisyonu (ortada ba≈üla)
        let isJumping = false; // Zƒ±plama durumu
        let jumpHeight = 0; // Mevcut zƒ±plama y√ºksekliƒüi
        
        // Kamera sistemi
        let camera = { x: 0, y: 0 };
        const viewportWidth = 600;
        const viewportHeight = 450;
        const cellSize = 31; // 30px + 1px gap
        
        // Blok kƒ±rƒ±lma s√ºreleri (saniye)
        const breakTimes = {
            'toprak': 3,
            'tas': 5,
            'odun': 4,
            'demir': 7,
            'cim': 1,
            'elmas': 10,
            'obsidyen': 20,
            'su': 2,
            'lav': 8,
            'yaprak': 0.5,
            'calisma-masasi': 4,
            'firin': 4,
            'ocak': 5,
            'tahta': 2,
            'cubuk': 1,
            'balta': 3
        };
        
        // Kƒ±rƒ±lma durumu
        let breakingBlock = null;
        let breakProgress = 0;
        let breakTimer = null;
        
        // Envanter sistemi
        let inventory = {};
        let inventoryOpen = false;
        let workbenchActive = false; // √áalƒ±≈üma masasƒ± kullanƒ±mda mƒ±
        
        // Hotbar sistemi
        let hotbar = [null, null, null]; // 3 slot
        let selectedHotbarSlot = 0; // Se√ßili slot (0, 1, 2)
        
        // Ara√ß sistemi
        let tools = {}; // Ara√ßlarƒ±n dayanƒ±klƒ±lƒ±ƒüƒ±nƒ± takip eder
        
        // Blok isimleri
        const blockNames = {
            'toprak': 'Toprak',
            'tas': 'Ta≈ü',
            'odun': 'Odun',
            'demir': 'Demir',
            'cim': '√áim',
            'elmas': 'Elmas',
            'obsidyen': 'Obsidyen',
            'su': 'Su',
            'lav': 'Lav',
            'yaprak': 'Yaprak',
            'calisma-masasi': '√áalƒ±≈üma Masasƒ±',
            'firin': 'Fƒ±rƒ±n',
            'ocak': 'Ocak',
            'tahta': 'Tahta',
            'cubuk': '√áubuk',
            'balta': 'Balta'
        };

        // Grid'i ba≈ülat
        function initGrid() {
            const gridContainer = document.getElementById('buildGrid');
            gridContainer.innerHTML = '';
            
            // 500x15 b√ºy√ºk harita
            const cols = gridSize.cols;
            const rows = gridSize.rows;
            
            grid = [];
            for (let row = 0; row < rows; row++) {
                grid[row] = [];
                for (let col = 0; col < cols; col++) {
                    grid[row][col] = null;
                    
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    cell.style.position = 'relative';
                    cell.style.width = '30px';
                    cell.style.height = '30px';
                    
                    // Mouse eventleri
                    cell.addEventListener('mousedown', handleCellClick);
                    cell.addEventListener('click', handleCellClickSimple);
                    cell.addEventListener('contextmenu', (e) => e.preventDefault());
                    
                    // Mouse leave - kƒ±rma i≈ülemini durdur
                    cell.addEventListener('mouseleave', () => {
                        if (breakingBlock && breakingBlock.row === row && breakingBlock.col === col) {
                            stopBreaking();
                        }
                    });
                    
                    // Mouse up - kƒ±rma i≈ülemini durdur
                    cell.addEventListener('mouseup', () => {
                        if (breakingBlock && breakingBlock.row === row && breakingBlock.col === col) {
                            stopBreaking();
                        }
                    });
                    
                    gridContainer.appendChild(cell);
                }
            }
            
            // Default zemin olu≈ütur
            createDefaultTerrain(rows, cols);
            
            // Karakteri yerle≈ütir ve kamerayƒ± ortala
            character.row = rows - 7; // √áim katmanƒ±nƒ±n √ºst√º
            character.col = 250; // Haritanƒ±n ortasƒ±nda ba≈üla
            placeCharacter();
            updateCamera();
        }

        // H√ºcre tƒ±klama i≈ülemi
        function handleCellClick(e) {
            e.preventDefault();
            const row = parseInt(e.target.dataset.row);
            const col = parseInt(e.target.dataset.col);
            
            console.log('MouseDown:', e.button, 'Row:', row, 'Col:', col, 'Se√ßili blok:', selectedBlockType);
            
            if (e.button === 0) { // Sol tƒ±k - blok koy
                placeBlock(row, col, selectedBlockType);
            } else if (e.button === 2) { // Saƒü tƒ±k - blok kƒ±r
                startBreaking(row, col);
            }
        }

        // Basit click i≈ülemi (sol tƒ±k i√ßin)
        function handleCellClickSimple(e) {
            e.preventDefault();
            const row = parseInt(e.target.dataset.row);
            const col = parseInt(e.target.dataset.col);
            
            console.log('Click:', 'Row:', row, 'Col:', col, 'Se√ßili blok:', selectedBlockType);
            
            // √áalƒ±≈üma masasƒ± kontrol√º
            const existingBlock = grid[row][col];
            if (existingBlock === 'calisma-masasi') {
                // √áalƒ±≈üma masasƒ± tƒ±klandƒ± - crafting men√ºs√ºn√º a√ß
                openWorkbench();
                return;
            }
            
            // Sol tƒ±k - blok koy
            placeBlock(row, col, selectedBlockType);
        }

        // Blok yerle≈ütir
        function placeBlock(row, col, blockType) {
            grid[row][col] = blockType;
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            
            // Blok stilini uygula
            cell.className = `grid-cell block-${blockType}`;
            
            // Yerle≈ütirme animasyonu
            cell.style.transform = 'scale(1.2)';
            setTimeout(() => {
                cell.style.transform = 'scale(1)';
            }, 150);
        }

        // Blok kƒ±rma ba≈ülat
        function startBreaking(row, col) {
            const blockType = grid[row][col];
            if (!blockType) return; // Bo≈ü h√ºcreyi kƒ±ramaz
            
            // √ñnceki kƒ±rma i≈ülemini iptal et
            stopBreaking();
            
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            const breakTime = getBreakTime(blockType); // Balta varsa hƒ±zlanƒ±r
            
            // Kƒ±rƒ±lma durumunu ayarla
            breakingBlock = { row, col, blockType };
            breakProgress = 0;
            
            // Progress bar ekle
            const progressBar = document.createElement('div');
            progressBar.className = 'break-progress';
            progressBar.innerHTML = '<div class="break-progress-fill"></div>';
            cell.appendChild(progressBar);
            
            // Kƒ±rƒ±lma animasyonu ba≈ülat
            cell.classList.add('breaking');
            
            // Timer ba≈ülat
            const startTime = Date.now();
            breakTimer = setInterval(() => {
                const elapsed = (Date.now() - startTime) / 1000;
                breakProgress = Math.min(elapsed / breakTime, 1);
                
                // Progress bar g√ºncelle
                const fill = progressBar.querySelector('.break-progress-fill');
                fill.style.width = (breakProgress * 100) + '%';
                
                if (breakProgress >= 1) {
                    // Kƒ±rƒ±lma tamamlandƒ±
                    completeBreaking();
                }
            }, 50); // 50ms'de bir g√ºncelle
        }

        // Kƒ±rma i≈ülemini tamamla
        function completeBreaking() {
            if (!breakingBlock) return;
            
            const { row, col, blockType } = breakingBlock;
            
            // Bloƒüu envantere ekle
            addToInventory(blockType);
            
            // Balta kullanƒ±ldƒ±ysa dayanƒ±klƒ±lƒ±ƒüƒ±nƒ± azalt
            if (selectedBlockType === 'balta') {
                useTool('balta');
            }
            
            // Bloƒüu kaldƒ±r
            grid[row][col] = null;
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            
            // Kƒ±rƒ±lma efektini temizle
            stopBreaking();
            
            // Final animasyon
            cell.style.transform = 'scale(0.8)';
            cell.style.opacity = '0.5';
            
            setTimeout(() => {
                cell.className = 'grid-cell';
                cell.style.transform = 'scale(1)';
                cell.style.opacity = '1';
            }, 150);
        }

        // Kƒ±rma i≈ülemini durdur
        function stopBreaking() {
            if (breakTimer) {
                clearInterval(breakTimer);
                breakTimer = null;
            }
            
            if (breakingBlock) {
                const { row, col } = breakingBlock;
                const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                
                // Progress bar ve animasyonu temizle
                const progressBar = cell.querySelector('.break-progress');
                if (progressBar) progressBar.remove();
                cell.classList.remove('breaking');
                
                breakingBlock = null;
                breakProgress = 0;
            }
        }

        // Eski removeBlock fonksiyonu (hƒ±zlƒ± kƒ±rma i√ßin)
        function removeBlock(row, col) {
            grid[row][col] = null;
            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            
            // Kƒ±rma animasyonu
            cell.style.transform = 'scale(0.8)';
            cell.style.opacity = '0.5';
            
            setTimeout(() => {
                cell.className = 'grid-cell';
                cell.style.transform = 'scale(1)';
                cell.style.opacity = '1';
            }, 150);
        }

        // Blok tipi se√ßimi
        document.querySelectorAll('.block-type').forEach(block => {
            block.addEventListener('click', function() {
                // √ñnceki se√ßimi kaldƒ±r
                document.querySelector('.block-type.selected').classList.remove('selected');
                
                // Yeni se√ßimi i≈üaretle
                this.classList.add('selected');
                selectedBlockType = this.dataset.type;
            });
        });

        // Default zemin olu≈ütur
        function createDefaultTerrain(rows, cols) {
            // 6. katman (en alt) - Ta≈ü
            for (let col = 0; col < cols; col++) {
                placeBlock(rows - 1, col, 'tas');
            }
            
            // 5. katman - Ta≈ü
            for (let col = 0; col < cols; col++) {
                placeBlock(rows - 2, col, 'tas');
            }
            
            // 4. katman - Ta≈ü
            for (let col = 0; col < cols; col++) {
                placeBlock(rows - 3, col, 'tas');
            }
            
            // 3. katman - Ta≈ü
            for (let col = 0; col < cols; col++) {
                placeBlock(rows - 4, col, 'tas');
            }
            
            // 2. katman - Toprak
            for (let col = 0; col < cols; col++) {
                placeBlock(rows - 5, col, 'toprak');
            }
            
            // 1. katman (en √ºst) - √áim
            for (let col = 0; col < cols; col++) {
                placeBlock(rows - 6, col, 'cim');
            }
            
            // Aƒüa√ßlarƒ± ekle
            createTrees(rows, cols);
        }

        // Aƒüa√ß olu≈ütur
        function createTrees(rows, cols) {
            // Harita boyunca aƒüa√ßlar yerle≈ütir (her 12-13 blokta bir aƒüa√ß)
            for (let i = 10; i < cols; i += 12) {
                const treeCol = i + Math.floor(Math.random() * 8) - 4; // ¬±4 rastgelelik
                if (treeCol >= 0 && treeCol < cols) {
                    createTree(rows - 7, treeCol, 5);
                }
            }
            
            // Ekstra aƒüa√ßlar (daha yoƒüun orman)
            for (let i = 6; i < cols; i += 15) {
                const treeCol = i + Math.floor(Math.random() * 6) - 3; // ¬±3 rastgelelik
                if (treeCol >= 0 && treeCol < cols) {
                    createTree(rows - 7, treeCol, 4 + Math.floor(Math.random() * 2)); // 4-5 blok y√ºksek
                }
            }
            
            // Ba≈ülangƒ±√ß b√∂lgesinde daha fazla aƒüa√ß
            createTree(rows - 7, 235, 5);
            createTree(rows - 7, 245, 4);
            createTree(rows - 7, 255, 5);
            createTree(rows - 7, 265, 4);
        }

        // Tek aƒüa√ß olu≈ütur
        function createTree(startRow, col, height) {
            // G√∂vde (odun) - alt 3 blok
            const trunkHeight = Math.min(3, height - 1);
            for (let i = 0; i < trunkHeight; i++) {
                placeBlock(startRow - i, col, 'odun');
            }
            
            // Ta√ß (yaprak) - √ºst kƒ±sƒ±m
            const leafStart = startRow - trunkHeight;
            const leafHeight = height - trunkHeight;
            
            for (let i = 0; i < leafHeight; i++) {
                const leafRow = leafStart - i;
                
                if (i === 0) {
                    // En alt yaprak katmanƒ± - 3x3
                    placeBlock(leafRow, col - 1, 'yaprak');
                    placeBlock(leafRow, col, 'yaprak');
                    placeBlock(leafRow, col + 1, 'yaprak');
                } else {
                    // √úst yaprak katmanlarƒ± - tek blok
                    placeBlock(leafRow, col, 'yaprak');
                }
            }
        }

        // Karakteri yerle≈ütir
        function placeCharacter() {
            // √ñnceki karakter temizle
            document.querySelectorAll('.character').forEach(char => char.remove());
            
            const cell = document.querySelector(`[data-row="${character.row}"][data-col="${character.col}"]`);
            if (cell) {
                const characterDiv = document.createElement('div');
                characterDiv.className = 'character';
                characterDiv.style.bottom = `${jumpHeight * 100}%`;
                cell.appendChild(characterDiv);
            }
        }

        // Karakteri hareket ettir
        function moveCharacter(newRow, newCol) {
            // Sƒ±nƒ±r kontrol√º
            if (newRow < 0 || newRow >= gridSize.rows || newCol < 0 || newCol >= gridSize.cols) {
                return false;
            }
            
            // Blok √ßarpƒ±≈üma kontrol√º (sadece bo≈ü alanlarda hareket)
            const targetBlock = grid[newRow][newCol];
            if (targetBlock) {
                return false; // Herhangi bir blok varsa hareket edemez
            }
            
            character.row = newRow;
            character.col = newCol;
            placeCharacter();
            updateCamera(); // Kamerayƒ± g√ºncelle
            return true;
        }

        // Kamera g√ºncelleme
        function updateCamera() {
            const gridContainer = document.getElementById('buildGrid');
            
            // Karakterin pixel pozisyonu
            const charX = character.col * cellSize;
            const charY = character.row * cellSize;
            
            // Kamera pozisyonunu hesapla (karakter ortada olacak ≈üekilde)
            camera.x = charX - viewportWidth / 2;
            camera.y = charY - viewportHeight / 2;
            
            // Kamera sƒ±nƒ±rlarƒ±
            const maxCameraX = (gridSize.cols * cellSize) - viewportWidth;
            const maxCameraY = (gridSize.rows * cellSize) - viewportHeight;
            
            camera.x = Math.max(0, Math.min(camera.x, maxCameraX));
            camera.y = Math.max(0, Math.min(camera.y, maxCameraY));
            
            // Grid'i hareket ettir
            gridContainer.style.transform = `translate(-${camera.x}px, -${camera.y}px)`;
        }

        // Zƒ±plama animasyonu
        async function jump() {
            console.log('Jump fonksiyonu √ßaƒürƒ±ldƒ±. isJumping:', isJumping);
            
            if (isJumping) {
                console.log('Zaten zƒ±plƒ±yor, √ßƒ±kƒ±lƒ±yor...');
                return;
            }
            
            console.log('Zƒ±plama ba≈ülƒ±yor...');
            isJumping = true;
            
            // 3 saniye toplam s√ºre, 5 blok y√ºkseklik
            // Yukarƒ± √ßƒ±k (1.5 saniye)
            for (let i = 1; i <= 5; i++) {
                console.log('Yukarƒ± √ßƒ±k, y√ºkseklik:', i);
                jumpHeight = i;
                placeCharacter();
                await new Promise(resolve => setTimeout(resolve, 300)); // 300ms * 5 = 1.5s
            }
            
            // A≈üaƒüƒ± in (1.5 saniye)
            for (let i = 4; i >= 0; i--) {
                console.log('A≈üaƒüƒ± in, y√ºkseklik:', i);
                jumpHeight = i;
                placeCharacter();
                await new Promise(resolve => setTimeout(resolve, 300)); // 300ms * 5 = 1.5s
            }
            
            console.log('Zƒ±plama tamamlandƒ±');
            isJumping = false;
        }

        // Envantere blok ekle
        function addToInventory(blockType) {
            if (inventory[blockType]) {
                inventory[blockType]++;
            } else {
                inventory[blockType] = 1;
            }
            updateInventoryDisplay();
            updateHotbar();
        }

        // Envanterden blok kullan
        function useFromInventory(blockType) {
            if (inventory[blockType] && inventory[blockType] > 0) {
                inventory[blockType]--;
                if (inventory[blockType] === 0) {
                    delete inventory[blockType];
                }
                updateInventoryDisplay();
                updateHotbar();
                return true;
            }
            return false;
        }

        // Envanter g√∂r√ºn√ºm√ºn√º g√ºncelle
        function updateInventoryDisplay() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            inventoryGrid.innerHTML = '';

            Object.entries(inventory).forEach(([blockType, count]) => {
                const slot = document.createElement('div');
                slot.className = 'inventory-slot';
                slot.dataset.blockType = blockType;
                
                const icon = document.createElement('div');
                icon.className = `block-icon block-${blockType}`;
                
                const countDiv = document.createElement('div');
                countDiv.className = 'block-count';
                countDiv.textContent = count;
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'block-name';
                nameDiv.textContent = blockNames[blockType] || blockType;
                
                slot.appendChild(icon);
                slot.appendChild(countDiv);
                slot.appendChild(nameDiv);
                
                // Slot tƒ±klama - blok se√ßimi
                slot.addEventListener('click', () => {
                    selectFromInventory(blockType);
                });
                
                // Drop event'leri
                slot.addEventListener('dragover', handleDragOver);
                slot.addEventListener('drop', handleDrop);
                
                inventoryGrid.appendChild(slot);
            });
        }

        // Envanterden blok se√ß
        function selectFromInventory(blockType) {
            selectedBlockType = blockType;
            
            // Palette'te se√ßimi g√ºncelle
            document.querySelectorAll('.block-type').forEach(block => {
                block.classList.remove('selected');
                if (block.dataset.type === blockType) {
                    block.classList.add('selected');
                }
            });
            
            // Envanter slotlarƒ±nda se√ßimi g√ºncelle
            document.querySelectorAll('.inventory-slot').forEach(slot => {
                slot.classList.remove('selected');
                if (slot.dataset.blockType === blockType) {
                    slot.classList.add('selected');
                }
            });
            
            console.log('Envanterden se√ßildi:', blockType);
        }

        // Envanter a√ß/kapa
        function toggleInventory() {
            inventoryOpen = !inventoryOpen;
            const overlay = document.getElementById('inventoryOverlay');
            
            if (inventoryOpen) {
                overlay.classList.add('active');
                updateInventoryDisplay();
                updateCraftingVisibility();
            } else {
                overlay.classList.remove('active');
                workbenchActive = false;
            }
        }

        // √áalƒ±≈üma masasƒ± a√ß
        function openWorkbench() {
            workbenchActive = true;
            inventoryOpen = true;
            
            const overlay = document.getElementById('inventoryOverlay');
            overlay.classList.add('active');
            updateInventoryDisplay();
            updateCraftingVisibility();
            
            showCraftingMessage('üî® √áalƒ±≈üma Masasƒ± a√ßƒ±ldƒ±!');
        }

        // Crafting b√∂l√ºm√ºn√ºn g√∂r√ºn√ºrl√ºƒü√ºn√º g√ºncelle
        function updateCraftingVisibility() {
            const craftingSection = document.getElementById('craftingSection');
            
            if (workbenchActive) {
                craftingSection.style.display = 'block';
            } else {
                craftingSection.style.display = 'none';
            }
        }

        // Tahta √ºretimi (1 odun = 4 tahta)
        function craftPlanks() {
            if (!workbenchActive) {
                showCraftingMessage('‚ùå √áalƒ±≈üma masasƒ± gerekli! √áalƒ±≈üma masasƒ±na sol tƒ±k yapƒ±n.');
                return;
            }
            
            if (inventory['odun'] && inventory['odun'] >= 1) {
                // 1 odun kullan
                useFromInventory('odun');
                
                // 4 tahta ekle
                for (let i = 0; i < 4; i++) {
                    addToInventory('tahta');
                }
                
                console.log('Tahta √ºretildi! 1 odun ‚Üí 4 tahta');
                
                // G√∂rsel feedback
                showCraftingMessage('üî® 1 Odun ‚Üí 4 Tahta √ºretildi!');
            } else {
                console.log('Yeterli odun yok!');
                showCraftingMessage('‚ùå Yeterli odun yok! (1 odun gerekli)');
            }
        }

        // √áubuk √ºretimi - Odundan (2 odun = 4 √ßubuk)
        function craftSticksFromWood() {
            if (!workbenchActive) {
                showCraftingMessage('‚ùå √áalƒ±≈üma masasƒ± gerekli! √áalƒ±≈üma masasƒ±na sol tƒ±k yapƒ±n.');
                return;
            }
            
            if (inventory['odun'] && inventory['odun'] >= 2) {
                // 2 odun kullan
                useFromInventory('odun');
                useFromInventory('odun');
                
                // 4 √ßubuk ekle
                for (let i = 0; i < 4; i++) {
                    addToInventory('cubuk');
                }
                
                console.log('√áubuk √ºretildi! 2 odun ‚Üí 4 √ßubuk');
                
                // G√∂rsel feedback
                showCraftingMessage('üî® 2 Odun ‚Üí 4 √áubuk √ºretildi!');
            } else {
                console.log('Yeterli odun yok!');
                showCraftingMessage('‚ùå Yeterli odun yok! (2 odun gerekli)');
            }
        }

        // √áubuk √ºretimi - Tahtadan (2 tahta = 4 √ßubuk)
        function craftSticksFromPlanks() {
            if (!workbenchActive) {
                showCraftingMessage('‚ùå √áalƒ±≈üma masasƒ± gerekli! √áalƒ±≈üma masasƒ±na sol tƒ±k yapƒ±n.');
                return;
            }
            
            if (inventory['tahta'] && inventory['tahta'] >= 2) {
                // 2 tahta kullan
                useFromInventory('tahta');
                useFromInventory('tahta');
                
                // 4 √ßubuk ekle
                for (let i = 0; i < 4; i++) {
                    addToInventory('cubuk');
                }
                
                console.log('√áubuk √ºretildi! 2 tahta ‚Üí 4 √ßubuk');
                
                // G√∂rsel feedback
                showCraftingMessage('üî® 2 Tahta ‚Üí 4 √áubuk √ºretildi!');
            } else {
                console.log('Yeterli tahta yok!');
                showCraftingMessage('‚ùå Yeterli tahta yok! (2 tahta gerekli)');
            }
        }

        // Balta √ºretimi (2 √ßubuk + 3 tahta = 1 balta)
        function craftAxe() {
            if (!workbenchActive) {
                showCraftingMessage('‚ùå √áalƒ±≈üma masasƒ± gerekli! √áalƒ±≈üma masasƒ±na sol tƒ±k yapƒ±n.');
                return;
            }
            
            if (inventory['cubuk'] && inventory['cubuk'] >= 2 && 
                inventory['tahta'] && inventory['tahta'] >= 3) {
                
                // 2 √ßubuk + 3 tahta kullan
                useFromInventory('cubuk');
                useFromInventory('cubuk');
                useFromInventory('tahta');
                useFromInventory('tahta');
                useFromInventory('tahta');
                
                // 1 balta ekle
                addToInventory('balta');
                
                // Yeni balta i√ßin dayanƒ±klƒ±lƒ±k ayarla (10 kullanƒ±m)
                const axeId = 'balta_' + Date.now();
                tools[axeId] = { type: 'balta', durability: 10, maxDurability: 10 };
                
                console.log('Balta √ºretildi! 2 √ßubuk + 3 tahta ‚Üí 1 balta');
                
                // G√∂rsel feedback
                showCraftingMessage('üî® 2 √áubuk + 3 Tahta ‚Üí 1 Balta √ºretildi!');
            } else {
                console.log('Yeterli malzeme yok!');
                showCraftingMessage('‚ùå Yeterli malzeme yok! (2 √ßubuk + 3 tahta gerekli)');
            }
        }

        // Crafting mesajƒ± g√∂ster
        function showCraftingMessage(message) {
            // Ge√ßici mesaj div'i olu≈ütur
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(45deg, #4CAF50, #45a049);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                font-size: 1.1em;
                font-weight: bold;
                z-index: 2000;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                border: 2px solid rgba(255, 255, 255, 0.3);
            `;
            messageDiv.textContent = message;
            
            document.body.appendChild(messageDiv);
            
            // 2 saniye sonra kaldƒ±r
            setTimeout(() => {
                messageDiv.remove();
            }, 2000);
        }

        // Hotbar g√ºncelle
        function updateHotbar() {
            // En √ßok olan 3 blok tipini hotbar'a yerle≈ütir
            const sortedInventory = Object.entries(inventory)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3);
            
            // Hotbar'ƒ± temizle
            hotbar = [null, null, null];
            
            // Yeni bloklarƒ± yerle≈ütir
            sortedInventory.forEach(([blockType, count], index) => {
                hotbar[index] = { type: blockType, count: count };
            });
            
            // G√∂r√ºn√ºm√º g√ºncelle
            updateHotbarDisplay();
        }

        // Hotbar g√∂r√ºn√ºm√ºn√º g√ºncelle
        function updateHotbarDisplay() {
            for (let i = 0; i < 3; i++) {
                const slot = document.querySelector(`[data-slot="${i}"]`);
                const icon = slot.querySelector('.hotbar-icon');
                const count = slot.querySelector('.hotbar-count');
                
                if (hotbar[i]) {
                    icon.className = `hotbar-icon block-${hotbar[i].type}`;
                    count.textContent = hotbar[i].count;
                    slot.style.opacity = '1';
                    
                    // Drag yapƒ±labilir yap
                    slot.setAttribute('draggable', 'true');
                    slot.dataset.blockType = hotbar[i].type;
                    slot.dataset.blockCount = hotbar[i].count;
                } else {
                    icon.className = 'hotbar-icon';
                    count.textContent = '';
                    slot.style.opacity = '0.3';
                    
                    // Drag yapƒ±lamaz yap
                    slot.setAttribute('draggable', 'false');
                    slot.removeAttribute('data-block-type');
                    slot.removeAttribute('data-block-count');
                }
                
                // Se√ßili slot
                if (i === selectedHotbarSlot) {
                    slot.classList.add('selected');
                } else {
                    slot.classList.remove('selected');
                }
            }
        }

        // Hotbar slot se√ßimi
        function selectHotbarSlot(slotIndex) {
            selectedHotbarSlot = slotIndex;
            
            // Se√ßili bloƒüu g√ºncelle
            if (hotbar[slotIndex]) {
                selectedBlockType = hotbar[slotIndex].type;
                
                // Palette'te se√ßimi g√ºncelle
                document.querySelectorAll('.block-type').forEach(block => {
                    block.classList.remove('selected');
                    if (block.dataset.type === selectedBlockType) {
                        block.classList.add('selected');
                    }
                });
            }
            
            updateHotbarDisplay();
        }

        // Grid'i temizle
        function clearGrid() {
            if (confirm('T√ºm bloklarƒ± silmek istediƒüinize emin misiniz?')) {
                initGrid();
            }
        }

        // Klavye kontrolleri
        document.addEventListener('keydown', async function(e) {
            // Sadece input alanƒ±nda deƒüilse hareket et
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            console.log('Tu≈ü basƒ±ldƒ±:', e.key, 'Code:', e.code);
            
            switch(e.key.toLowerCase()) {
                case 'w':
                    e.preventDefault();
                    moveCharacter(character.row - 1, character.col);
                    break;
                case 's':
                    e.preventDefault();
                    moveCharacter(character.row + 1, character.col);
                    break;
                case 'a':
                    e.preventDefault();
                    moveCharacter(character.row, character.col - 1);
                    break;
                case 'd':
                    e.preventDefault();
                    moveCharacter(character.row, character.col + 1);
                    break;
                case ' ':
                    e.preventDefault();
                    console.log('Space tu≈üu basƒ±ldƒ±, zƒ±plama ba≈ülƒ±yor...');
                    await jump();
                    break;
                case 'e':
                    e.preventDefault();
                    toggleInventory();
                    break;
                case '1':
                    e.preventDefault();
                    selectHotbarSlot(0);
                    break;
                case '2':
                    e.preventDefault();
                    selectHotbarSlot(1);
                    break;
                case '3':
                    e.preventDefault();
                    selectHotbarSlot(2);
                    break;
            }
            
            // Space tu≈üu i√ßin alternatif kontrol
            if (e.code === 'Space') {
                e.preventDefault();
                console.log('Space code algƒ±landƒ±, zƒ±plama ba≈ülƒ±yor...');
                await jump();
            }
        });

        // Sayfa y√ºklendiƒüinde grid'i ba≈ülat
        document.addEventListener('DOMContentLoaded', function() {
            initGrid();
            updateHotbarDisplay();
            
            // Hotbar slot tƒ±klama event'leri
            document.querySelectorAll('.hotbar-slot').forEach((slot, index) => {
                slot.addEventListener('click', () => {
                    selectHotbarSlot(index);
                });
            });
            
            // Drag & Drop event'lerini ayarla
            setupDragAndDrop();
        });

        // Drag & Drop sistemini kurulum
        function setupDragAndDrop() {
            // Hotbar slotlarƒ± i√ßin drag event'leri
            document.querySelectorAll('.hotbar-slot').forEach(slot => {
                slot.addEventListener('dragstart', handleDragStart);
                slot.addEventListener('dragend', handleDragEnd);
                slot.addEventListener('dragover', handleDragOver);
                slot.addEventListener('drop', handleDrop);
            });
        }

        // Drag ba≈ülangƒ±cƒ±
        function handleDragStart(e) {
            if (this.getAttribute('draggable') === 'false') {
                e.preventDefault();
                return;
            }
            
            this.classList.add('dragging');
            
            // Transfer edilecek veriyi ayarla
            e.dataTransfer.setData('text/plain', JSON.stringify({
                source: 'hotbar',
                slotIndex: parseInt(this.dataset.slot),
                blockType: this.dataset.blockType,
                blockCount: parseInt(this.dataset.blockCount)
            }));
            
            // Ghost image olu≈ütur
            const icon = this.querySelector('.hotbar-icon');
            const ghostImage = icon.cloneNode(true);
            ghostImage.className += ' drag-ghost';
            document.body.appendChild(ghostImage);
            e.dataTransfer.setDragImage(ghostImage, 25, 25);
            
            // Ghost image'i temizle
            setTimeout(() => document.body.removeChild(ghostImage), 0);
        }

        // Drag biti≈üi
        function handleDragEnd(e) {
            this.classList.remove('dragging');
            
            // T√ºm drag-over sƒ±nƒ±flarƒ±nƒ± temizle
            document.querySelectorAll('.drag-over').forEach(el => {
                el.classList.remove('drag-over');
            });
        }

        // Drag over
        function handleDragOver(e) {
            e.preventDefault();
            this.classList.add('drag-over');
        }

        // Drop
        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            try {
                const dragData = JSON.parse(e.dataTransfer.getData('text/plain'));
                
                if (dragData.source === 'hotbar' && this.classList.contains('inventory-slot')) {
                    // Hotbar'dan envantere transfer
                    transferFromHotbarToInventory(dragData.slotIndex, dragData.blockType, dragData.blockCount);
                }
            } catch (error) {
                console.error('Drag & drop error:', error);
            }
        }

        // Hotbar'dan envantere transfer
        function transferFromHotbarToInventory(slotIndex, blockType, blockCount) {
            // Hotbar'dan kaldƒ±r
            hotbar[slotIndex] = null;
            
            // Envantere ekle
            if (inventory[blockType]) {
                inventory[blockType] += blockCount;
            } else {
                inventory[blockType] = blockCount;
            }
            
            // G√∂r√ºn√ºmleri g√ºncelle
            updateHotbarDisplay();
            updateInventoryDisplay();
            
            console.log(`${blockCount} ${blockType} hotbar'dan envantere ta≈üƒ±ndƒ±`);
            showCraftingMessage(`üì¶ ${blockCount} ${blockNames[blockType]} envantere ta≈üƒ±ndƒ±!`);
        }

        // Ara√ß kullanƒ±mƒ±
        function useTool(toolType) {
            // Aktif ara√ßlarƒ± bul
            const activeTools = Object.keys(tools).filter(id => tools[id].type === toolType);
            
            if (activeTools.length === 0) return;
            
            // ƒ∞lk aracƒ± kullan
            const toolId = activeTools[0];
            tools[toolId].durability--;
            
            console.log(`${toolType} kullanƒ±ldƒ±. Kalan dayanƒ±klƒ±lƒ±k: ${tools[toolId].durability}`);
            
            // Ara√ß kƒ±rƒ±ldƒ± mƒ±?
            if (tools[toolId].durability <= 0) {
                // Ara√ß kƒ±rƒ±ldƒ±
                delete tools[toolId];
                
                // Envanterden kaldƒ±r
                if (inventory[toolType] && inventory[toolType] > 0) {
                    useFromInventory(toolType);
                }
                
                showCraftingMessage(`üí• ${blockNames[toolType]} kƒ±rƒ±ldƒ±!`);
                console.log(`${toolType} kƒ±rƒ±ldƒ± ve envanterden kaldƒ±rƒ±ldƒ±`);
            }
        }

        // Kƒ±rma s√ºresini hesapla (balta varsa hƒ±zlandƒ±r)
        function getBreakTime(blockType) {
            let baseTime = breakTimes[blockType] || 3;
            
            // Balta kullanƒ±lƒ±yorsa 2x hƒ±zlƒ±
            if (selectedBlockType === 'balta') {
                baseTime = baseTime / 2;
            }
            
            return baseTime;
        }

        // Pencere boyutu deƒüi≈ütiƒüinde grid'i yeniden √ßiz
        window.addEventListener('resize', function() {
            setTimeout(initGrid, 100);
        });

        // Saƒü tƒ±k men√ºs√ºn√º engelle
        document.addEventListener('contextmenu', (e) => e.preventDefault());
    </script>
</body>
</html>
